<navigation></navigation>

<div class="container">

	<page-header content="vm.pageHeader"></page-header>
	
	<!--User Management-->
	<div class="col-md-12">

		<p>This page is for creating, viewing, modifying, and deleting users.</p>

		<button data-step="1" data-intro="Click here to create a new user!" type="button" class="btn btn-md btn-success blueButton" style="border-radius: 12px 12px 0 0;font-weight:500;" ng-click="vm.popupNewUser()">New User</button>
		<a class="hidden-xs" style="float:right;" href="javascript:void(0);" onclick="javascript:introJs().start();">
			<i class="fa fa-question-circle" aria-hidden="true"></i>
		</a>

		<div class="bs-loading-container" bs-loading-overlay bs-loading-overlay-active-class="loading-overlay--active" bs-loading-overlay-reference-id="analysis-list"> 
			<div class="blur-this">
				<table ng-table="vm.tableParams" class="table table-bordered table-striped users-browser-table">
					<tr class="table-row" ng-repeat="row in $data">
						<td data-title="'Avatar'" class="avatar-cell">
							<div data-step="2" data-intro="This is a users' current Avatar!" class="img-circle med-avatar-container" style="background-image: url('{{ row.avatar }}');">
								<img src="{{ row.avatar }}" class="med-avatar"/>
							</div>
						</td>
						<td data-title="'First Name'" filter="{firstName: 'text'}" sortable="'firstName'" class="first-name-cell">
							<div data-step="3" data-intro="This is a users' first name!">{{row.firstName}}</div>
						</td>
						<td data-title="'Last Name'" filter="{lastName: 'text'}" sortable="'lastName'" class="last-name-cell hidden-xs hidden-sm"  header-class="'hidden-xs hidden-sm'" >
							<div data-step="4" data-intro="This is a users' surname!">{{row.lastName}}</div>
						</td>
						<td data-title="'Email'" filter="{email: 'text'}" sortable="'email'" class="email-cell hidden-xs"  header-class="'hidden-xs'">
							<div data-step="5" data-intro="This is a users' email address!">{{row.email}}</div>
						</td>
						<td data-title="'Role'" filter="{role: 'text'}" sortable="'role'" class="role-cell hidden-xs hidden-sm"  header-class="'hidden-xs hidden-sm'">
							<span data-step="6" data-intro="This user is a System Administrator!" ng-if="row.isAdmin" class="label label-success">Admin</span>
							<span data-step="7" data-intro="This user is a Researcher!" ng-if="!row.isAdmin" class="label label-primary blueButton">Researcher</span>
						</td>
						<td data-title="'Action'" class="context-menu-cell">
							<div data-step="8" data-intro="Click here to view/edit/delete this user!" class="dropdown">
								<span class="fa fa-ellipsis-h dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true"></span>
								<ul class="dropdown-menu dropdown-menu-right">
									<li ng-click="vm.popupEditUser(row)" class="edit-btn"><a>Edit</a></li>
									<li ng-click="vm.confirmDelete(row)" class="delete-btn"><a>Delete</a></li>
								</ul>
							</div>
						</td>
					</tr>

				</table>
			</div>
		</div>
	</div>
</div>

<footer-generic></footer-generic>

